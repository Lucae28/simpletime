const translations = {
  de: {
    // Allgemein / Header
    tagline: "Einfaches Zeit-Tracking, das mitdenkt.",
    languageLabel: "Sprache",
    // Support-Seite
    headline: "Support",
    intro:
      "Danke, dass du SimpleTime verwendest! Wenn du Fragen, Feedback oder Probleme hast, kannst du dich jederzeit melden.",
    contactHeading: "Kontakt",
    contactEmailLabel: "E-Mail:",
    faqHeading: "Häufige Fragen",
    faqDataLossQuestion: "Datenverlust?",
    faqDataLossAnswer:
      "Stelle sicher, dass iCloud in den iOS-Einstellungen aktiviert ist und SimpleTime Zugriff auf iCloud hat.",
    faqBackupQuestion: "Backup wiederherstellen?",
    faqBackupAnswer:
      "Öffne SimpleTime → Einstellungen → Backup und wähle die gewünschte Backup-Datei.",

    // Privacy-Seite
    privacyHeadline: "Datenschutzerklärung – SimpleTime",
    privacyUpdatedPrefix: "Stand:",
    privacyUpdatedDate: "05.12.2025",
    privacyIntro:
      "SimpleTime respektiert deine Privatsphäre. Die App sammelt keine personenbezogenen Daten und überträgt keine Daten an Dritte.",
    privacySection1Title: "1. Erhobene Daten",
    privacySection1Intro:
      "SimpleTime speichert ausschließlich folgende lokal generierte Inhalte auf deinem Gerät:",
    privacySection1List1: "Aufgaben und Kategorien",
    privacySection1List2: "Zeit-Einträge",
    privacySection1List3: "Notizen",
    privacySection1List4: "App-Einstellungen",
    privacySection1Outro:
      "Diese Daten werden von SimpleTime nicht an Server gesendet.",
    privacySection2Title: "2. iCloud-Speicherung",
    privacySection2Text:
      "Wenn iCloud aktiviert ist, werden deine Daten verschlüsselt in deinem persönlichen iCloud-Account gespeichert. Apple stellt die technische Infrastruktur bereit. SimpleTime erhält keinen Zugriff auf deine iCloud-Daten.",
    privacySection3Title: "3. Analyse- und Trackingdienste",
    privacySection3Text:
      "SimpleTime verwendet keine Analyse-Tools, kein Tracking und keine Werbung. Es werden keine Nutzungsprofile erstellt.",
    privacySection4Title: "4. Rechte der Nutzer",
    privacySection4Text:
      "Da SimpleTime keine personenbezogenen Daten erhebt oder verarbeitet, sind keine gesonderten Auskunfts- oder Löschanfragen erforderlich. Du kannst deine Daten jederzeit direkt in der App löschen.",
    privacySection5Title: "5. Kontakt",
    privacySection5Intro:
      "Bei Fragen zum Datenschutz kannst du dich an folgende Adresse wenden:",
    privacyContactEmailLabel: "E-Mail:"
  },

  en: {
    // General / Header
    tagline: "Simple time tracking that just works.",
    languageLabel: "Language",
    // Support page
    headline: "Support",
    intro:
      "Thank you for using SimpleTime! If you have any questions, feedback, or issues, feel free to reach out.",
    contactHeading: "Contact",
    contactEmailLabel: "Email:",
    faqHeading: "Frequently Asked Questions",
    faqDataLossQuestion: "Data loss?",
    faqDataLossAnswer:
      "Please make sure iCloud is enabled in iOS settings and that SimpleTime has permission to use iCloud.",
    faqBackupQuestion: "Restore a backup?",
    faqBackupAnswer:
      "Open SimpleTime → Settings → Backup and choose the backup file you want to restore.",

    // Privacy page
    privacyHeadline: "Privacy Policy – SimpleTime",
    privacyUpdatedPrefix: "Last updated:",
    privacyUpdatedDate: "2025-12-05",
    privacyIntro:
      "SimpleTime respects your privacy. The app does not collect personal data and does not transmit any data to third parties.",
    privacySection1Title: "1. Data collected",
    privacySection1Intro:
      "SimpleTime only stores the following locally generated content on your device:",
    privacySection1List1: "Tasks and categories",
    privacySection1List2: "Time entries",
    privacySection1List3: "Notes",
    privacySection1List4: "App settings",
    privacySection1Outro:
      "These data are not sent to any servers by SimpleTime.",
    privacySection2Title: "2. iCloud storage",
    privacySection2Text:
      "If iCloud is enabled, your data are stored in encrypted form in your personal iCloud account. Apple provides the technical infrastructure. SimpleTime has no access to your iCloud data.",
    privacySection3Title: "3. Analytics and tracking services",
    privacySection3Text:
      "SimpleTime does not use analytics tools, tracking, or advertising. No usage profiles are created.",
    privacySection4Title: "4. User rights",
    privacySection4Text:
      "Since SimpleTime does not collect or process personal data, no separate access or deletion requests are required. You can delete your data at any time directly in the app.",
    privacySection5Title: "5. Contact",
    privacySection5Intro:
      "If you have any questions about data protection, you can contact us at:",
    privacyContactEmailLabel: "Email:"
  },

  fr: {
    // Général / en-tête
    tagline: "Suivi du temps simple et intelligent.",
    languageLabel: "Langue",
    // Page support
    headline: "Assistance",
    intro:
      "Merci d’utiliser SimpleTime ! Si tu as des questions, des remarques ou des problèmes, tu peux nous contacter à tout moment.",
    contactHeading: "Contact",
    contactEmailLabel: "E-mail :",
    faqHeading: "Questions fréquentes",
    faqDataLossQuestion: "Perte de données ?",
    faqDataLossAnswer:
      "Assure-toi qu’iCloud est activé dans les réglages iOS et que SimpleTime est autorisée à utiliser iCloud.",
    faqBackupQuestion: "Restaurer une sauvegarde ?",
    faqBackupAnswer:
      "Ouvre SimpleTime → Réglages → Sauvegarde et choisis le fichier de sauvegarde souhaité.",

    // Page confidentialité
    privacyHeadline: "Politique de confidentialité – SimpleTime",
    privacyUpdatedPrefix: "Version :",
    privacyUpdatedDate: "05.12.2025",
    privacyIntro:
      "SimpleTime respecte ta vie privée. L’app ne collecte aucune donnée personnelle et ne transmet aucune information à des tiers.",
    privacySection1Title: "1. Données enregistrées",
    privacySection1Intro:
      "SimpleTime enregistre uniquement les contenus générés localement sur ton appareil :",
    privacySection1List1: "Tâches et catégories",
    privacySection1List2: "Enregistrements de temps",
    privacySection1List3: "Notes",
    privacySection1List4: "Réglages de l’app",
    privacySection1Outro:
      "Ces données ne sont pas envoyées vers des serveurs par SimpleTime.",
    privacySection2Title: "2. Stockage iCloud",
    privacySection2Text:
      "Si iCloud est activé, tes données sont stockées de manière chiffrée dans ton compte iCloud personnel. Apple fournit l’infrastructure technique. SimpleTime n’a aucun accès à tes données iCloud.",
    privacySection3Title: "3. Outils d’analyse et de suivi",
    privacySection3Text:
      "SimpleTime n’utilise aucun outil d’analyse, aucun suivi et aucune publicité. Aucun profil d’utilisation n’est créé.",
    privacySection4Title: "4. Droits des utilisateurs",
    privacySection4Text:
      "Comme SimpleTime ne collecte ni ne traite de données personnelles, aucune demande particulière d’accès ou de suppression n’est nécessaire. Tu peux supprimer tes données à tout moment directement dans l’app.",
    privacySection5Title: "5. Contact",
    privacySection5Intro:
      "Pour toute question relative à la protection des données, tu peux nous contacter à l’adresse suivante :",
    privacyContactEmailLabel: "E-mail :"
  }
};

function getLangFromURL() {
  const params = new URLSearchParams(window.location.search);
  return params.get("lang");
}

function setLanguage(lang) {
  const dict = translations[lang] || translations.de;

  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.dataset.i18n;
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });

  const select = document.getElementById("language-select");
  if (select) select.value = lang;
}

document.addEventListener("DOMContentLoaded", () => {
  const urlLang = getLangFromURL();
  const browserLang = (navigator.language || "de").slice(0, 2);

  const lang =
    urlLang && translations[urlLang]
      ? urlLang
      : translations[browserLang]
      ? browserLang
      : "de";

  setLanguage(lang);

  const select = document.getElementById("language-select");
  if (select) {
    select.addEventListener("change", () => {
      const newLang = select.value;
      const url = new URL(window.location);
      url.searchParams.set("lang", newLang);
      window.location.href = url.toString();
    });
  }

  // Jahr im Footer aktualisieren (falls vorhanden)
  const yearEl = document.getElementById("year");
  if (yearEl) {
    yearEl.textContent = new Date().getFullYear();
  }
});
